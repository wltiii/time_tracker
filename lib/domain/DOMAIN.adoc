= Driven Design Principles Domain Layer

== Explanation

This layer encapsulates the business rules and logic of the application.
It contains all the classes that represent the core domain concepts and entities, such as value objects, entities, and domain services.
In a shopping cart application, this could be entities such as Product, Cart, Customer and Order.

The domain layer is the central part of a Flutter project using Domain-Driven Design (DDD). It contains the core entities and logic of the application, independent of the technical details of the implementation.

In the domain layer, entities are the core objects that represent the state and behavior of the domain. For example, in a to-do list application, the Task entity might represent a single task that a user can create, complete, and view.

Value objects are objects that represent a value in the domain, without having a distinct identity. For example, in a to-do list application, the DueDate value object might represent the date and time when a task is due.

_Domain services_ are classes that implement business logic that is not specific to a particular entity in the domain. For example, in a to-do list application, a domain service might be responsible for calculating the total number of tasks that are overdue.

*The domain layer should be independent of the user interface and the technical implementation of the application.* This allows the domain logic to be tested, maintained, and reused in other contexts.

Additionally, the domain layer should be the central focus of the design, with the other layers serving to support and implement the core domain logic.

== The Aggregate Root

An *aggregate root* typically exists in the Domain top-level folder, as it is a core domain concept.
_It represents a single unit of change and consistency in the domain model._
It also acts as a boundary for the consistency of the aggregate, ensuring that any changes made to the objects within the aggregate are valid according to the business rules.

An aggregate root is:

. An object that acts as a gateway to a cluster of related objects, known as an aggregate.
. A group of domain objects that are considered as a single unit for the purpose of data changes.
. The only object within the aggregate that can be directly accessed.
. The enforcer of the invariants of the aggregate.

For example, in a shopping cart application, the Cart class would be the aggregate root, as it is the object that contains the collection of Product objects and manages their state. It also enforces the business rules that govern the cart, such as the maximum number of items that can be added to the cart and the total cost of the cart. The Cart class is the only class that can be accessed directly and any changes to the Product objects inside the cart should be made through the Cart class.

== Potential Domain Objects

In a time tracking application, you might find objects such as:

. *Time Entry*
These are the individual units of time that are tracked by the application.
A time entry might include information such as the date and time it was created, the duration of the time period it covers, and any relevant notes or comments.

. *Project*
Represents a specific task or group of tasks that a user is working on.
These are the broader categories or groups that time entries can be associated with.
For example, a project might represent a specific client or project that an individual is working on.
All the time entries for that project would be grouped together.

. *Client*
Represents a person or organization for which the user is doing work.

. *User*
Represents a person who is using the application to track their time.
A user might have their own profile, including information such as their name and contact details, as well as their own collection of time entries and projects.

. *Task*
Represents a specific piece of work that a user is completing as part of a project.

. *Category*
Provides the capability to group similar time entries or projects together.

. *Reports*
These are the summaries and visualizations that are generated by the time tracking application to help users understand their time usage.
Reports might include information such as the total time spent on a particular project, or a breakdown of time entries by day or week.
It might be represented as settings that could include title, subtitle, as well as defining the period, users, clients, categories, etc. that would be included in a given report.

. *Settings*
These are the configuration options that allow users to customize the behavior of the time tracking application.
Settings might include things like the default duration for time entries, or the format for displaying dates and times.

== Potential Time Entry Usecases And Services

=== Usecases

. Creating a new time entry +
This use case would involve a user entering the details of their time, such as the project they worked on, the task they completed, the duration of the work, and any notes or comments.

. Editing an existing time entry +
This use case would involve a user modifying the details of a previously entered time entry, such as correcting the duration or adding additional notes.

. Deleting a time entry +
This use case would involve a user removing a time entry from the system.

. Viewing time entries +
This use case would involve a user reviewing their own time entries or those of another user in the system.
The user might want to filter the entries by date range, project, or task.

. Reporting on time entries +
This use case would involve generating reports on time entries for a specific project, task, or user.
The report might include totals for the number of hours worked, the amount of billable time, and any other relevant metrics.

. Approving time entries +
In some organizations, time entries may need to be approved by a manager or other designated person before they are considered final.
This use case would involve a user reviewing and approving or rejecting time entries submitted by other users.

=== Services

. Time entry validation +
This domain service would be responsible for ensuring that time entries meet certain criteria, such as being within a certain date range, having valid project and task associations, and having a duration that is greater than zero.

. Time entry approval +
If time entries need to be approved in the system, this domain service would handle the process of reviewing and approving or rejecting time entries.

. Time entry reporting +
This domain service would be responsible for generating reports on time entries, such as totals for the number of hours worked, the amount of billable time, and any other relevant metrics.

. Time entry assignment +
In some cases, time entries may need to be assigned to a specific user or group of users.
This domain service would handle the process of assigning time entries to the appropriate users.

. Time entry notification +
This domain service would be responsible for sending notifications to users when certain events occur, such as when a time entry is created, edited, or approved.

. Time entry reconciliation +
In some cases, time entries may need to be reconciled with external data sources, such as payroll systems or billing systems.
This domain service would handle the process of reconciling time entries with these external systems.

== Entities vs Domains
In domain-driven design (DDD), an entity is a domain object that has a unique identity and is characterized by its attributes, behavior, and relationships with other objects.
It is a concept that is central to DDD, and it represents a thing or concept that is meaningful to the business domain.

A model, on the other hand, is a representation of a real-world system or concept.
It can be a physical model, such as a scale model of a building, or a mathematical model, such as a computer simulation of a process.
In DDD, a model can be used to represent the domain concepts and relationships within the business domain.

So, in DDD, an entity represents a real-world concept or thing that is meaningful to the business domain, while a model is a representation of that concept or thing.
_The key difference between the two is that an entity has a unique identity and exists within the domain_, while a model is a representation of a concept or system.